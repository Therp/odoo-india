<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data noupdate="1">

		<record id="workorders_form_moves_lines2" model="ir.ui.view">
			<field name="name">mrp.production.workcenter.tree.buttons</field>
			<field name="model">mrp.production</field>
			<field name="inherit_id" ref="mrp_operations.mrp_production_form_inherit_view2" />
			<field name="arch" type="xml">
				<xpath
					expr="//field[@name='workcenter_lines']/tree//button[@name='button_start_working']"
					position="replace">
					<button name="action_to_start_working" string="Start"
						states="draft" icon="gtk-media-play" help="Start Workingss" type="object" />
				</xpath>
				<xpath
					expr="//field[@name='workcenter_lines']/tree//button[@name='button_draft']"
					position="replace">
				</xpath>
				<xpath
					expr="//field[@name='workcenter_lines']/tree//button[@name='button_done']"
					position="replace">
					<button name="action_finish" string="Finished" states="startworking"
						icon="terp-check" help="Finish Order" type="object" />
				</xpath>
			</field>
		</record>
	</data>
	<data>
		<record id="workorders_form_moves_lines" model="ir.ui.view">
			<field name="name">mrp.production.form.inherit</field>
			<field name="model">mrp.production</field>
			<field name="inherit_id" ref="mrp_operations.mrp_production_form_inherit_view" />
			<field name="arch" type="xml">
				<!-- Updated button_draft, button_start_working, button_cancel, button_done 
					into button object instead of workflow -->
				<xpath
					expr="//field[@name='workcenter_lines']/form//button[@name='button_cancel']"
					position="replace">
					<button name="action_cancelled" string="Cancel Order"
						states="draft,startworking" icon="gtk-stop" help="Cancel Order"
						type="object" />
				</xpath>
				<xpath
					expr="//field[@name='workcenter_lines']/form//button[@name='button_done']"
					position="replace">
					<button name="action_finish" string="Finished" states="startworking"
						icon="terp-check" help="Finish Order" type="object" />
				</xpath>

				<xpath
					expr="//field[@name='workcenter_lines']/form//button[@name='button_start_working']"
					position="replace">
					<button name="action_to_start_working" string="Start"
						states="draft" icon="gtk-media-play" help="Start Workingss" type="object" />
				</xpath>

				<xpath
					expr="//field[@name='workcenter_lines']/form//button[@name='button_draft']"
					position="before">
					<button name="add_consume_product" string="+(Add Product)"
						help="Add consume product to work-order" type="object" class="oe_highlight"
						attrs="{'invisible': ['|',('state','not in', ('startworking','pause')), ('order_type','=','out')]}" />

					<button name="dummy_button" string="âŸ³ (Update)" help="Take-In to WorkCenter"
						type="object" class="oe_highlight" />
				</xpath>

				<xpath
					expr="//field[@name='workcenter_lines']/form//button[@name='button_draft']"
					position="replace">
				</xpath>

				<xpath
					expr="//field[@name='workcenter_lines']/form//field[@name='cycle']"
					position="before">
					<field name="delay" readonly="1" widget="float_time" />
				</xpath>
				<xpath
					expr="//notebook/page[@string='Work Orders']/button[@name='action_compute']"
					position="replace" />
				<xpath
					expr="//notebook/page[@string='Scheduled Products']/button[@name='action_compute']"
					position="replace" />
				<xpath expr="//field[@name='workcenter_lines']/form" position="inside">
					<group>
						<group>
							<label for="date_start" string="Start Date" />
							<div>
								<h3>
									<field name="date_start" readonly="1" string="Start Date" />
								</h3>
								<button name="%(action_change_common_date_update)d" type="action"
									string="Update Start Date?" class="oe_link"
									context="{'fields_name':'date_start'}" />
							</div>
						</group>
						<group>
							<label for="temp_date_finished" string="Stop Date" />
							<div>
								<h3>
									<field name="temp_date_finished" readonly="1" />
								</h3>
								<button name="%(action_change_common_date_update)d" type="action"
									string="Update Stop Date?" class="oe_link"
									context="{'fields_name':'date_finished,temp_date_finished'}" />
							</div>
						</group>
					</group>
				</xpath>

				<xpath
					expr="//field[@name='workcenter_lines']/tree//field[@name='cycle']"
					position="before">
					<field name="order_type" string="Type" />
					<field name="date_start" readonly="1" string="Start Date" />
					<field name="temp_date_finished" readonly="1" string="Stop Date" />
					<field name="delay" readonly="1" widget="float_time" />
				</xpath>

				<xpath
					expr="//field[@name='workcenter_lines']/form//field[@name='cycle']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="//field[@name='workcenter_lines']/form//field[@name='hour']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>

				<xpath expr="//field[@name='move_lines']" position="attributes">
					<attribute name="readonly">1</attribute>
				</xpath>

				<xpath expr="//field[@name='move_lines']/tree/field[@name='product_id']"
					position="after">
					<field name="moves_to_workorder" invisible="1" />
				</xpath>

				<xpath
					expr="//field[@name='move_lines']/tree/button[@string='Split in Serial Numbers']"
					position="replace">
					<button name="%(stock.track_line)d" string="Split in Serial Numbers"
						type="action" icon="gtk-justify-fill" groups="stock.group_production_lot"
						attrs="{'invisible': [('moves_to_workorder','=',True)]}" />
				</xpath>


				<xpath expr="//field[@name='move_lines2']" position="attributes">
					<attribute name="readonly">1</attribute>
				</xpath>

				<xpath expr="//field[@name='move_lines2']/tree/field[@name='product_id']"
					position="after">
					<field name="extra_consumed" readonly="1" />
				</xpath>

				<xpath expr="//field[@name='move_created_ids']" position="attributes">
					<attribute name="readonly">1</attribute>
				</xpath>
				<xpath expr="//field[@name='move_created_ids2']" position="attributes">
					<attribute name="readonly">1</attribute>
				</xpath>


				<xpath expr="//field[@name='workcenter_lines']/tree" position="attributes">
					<attribute name="colors">blue:state in
						('draft','pause');black:state == 'startworking';red:state in
						('cancel');gray:state in ('done','')
					</attribute>
				</xpath>

				<xpath
					expr="//field[@name='move_lines']/tree/button[@string='Scrap Products']"
					position="replace">
				</xpath>

				<xpath
					expr="//field[@name='move_lines']/tree/button[@string='Consume Products']"
					position="replace">
				</xpath>

				<xpath expr="//sheet/group/group[3]" position="replace">
				</xpath>

				<field name="date_planned" position="before">
					<field name="already_produced_qty" />
					<field name="scraped_qty" readonly="1" />
					<field name="scrap_order_id" readonly="1"
						attrs="{'invisible':[('scrap_order_id','=',False)]}" />
				</field>
				<field name="date_planned" position="after">
					<field name="customer_id" />
				</field>
				<field name="company_id" position="after">
					<field name="date_finished" />
				</field>
				<field name="origin" position="after">
					<field name="moves_to_workorder" string="Materials moved to workcenter?"
						readonly="1" />
					<field name="sale_order_id" attrs="{'invisible':[('sale_order_id','=',False)]}" />
				</field>

				<xpath expr="//button[@name='button_produce']" position="before">
					<button name="product_moves_to_workcenter" string="Products Moves To WorkCenter"
						type="object" class="oe_highlight"
						attrs="{'invisible': ['|',('state','!=', 'ready'), ('moves_to_workorder','=',True)]}" />
				</xpath>
				<xpath expr="//button[@name='button_produce']" position="replace" />
				<xpath expr="//button[@string='Produce']" position="replace">
					<button name="%(mrp.act_mrp_product_produce)d"
						attrs="{'invisible': [('state','!=', 'in_production')]}" string="Partially Produce"
						type="action" class="oe_highlight" />
					<button name="%(act_mrp_product_partially_close)d"
						attrs="{'invisible': [('state','!=', 'in_production')]}" string="Force To Close"
						type="action" class="oe_highlight" />
				</xpath>
				<xpath expr="//button[@name='force_production']" position="replace" />
				<xpath expr="//button[@name='force_production']" position="replace" />


				<xpath expr="//notebook/page[@string='Extra Information']"
					position="inside">
					<group string="Location Movements">
						<group>
							<field name="location_src_id" domain="[('usage','=','internal')]"
								on_change="location_id_change(location_src_id,location_dest_id)" />
						</group>
						<group>
							<field name="location_dest_id" domain="[('usage','=','internal')]" />
						</group>
					</group>
				</xpath>

				<xpath expr="//notebook/page[@string='Extra Information']"
					position="after">
					<page string="Split Orders" attrs="{'invisible':[('backorder_ids','=',[])]}">
						<group string="Split Orders">
							<field name="backorder_ids" nolabel="1" />
						</group>
					</page>
				</xpath>

				<xpath expr="//button[@name='action_cancel']" position="before">
					<button name="set_to_draft_order" string="Continue" states="split_order"
						help="Directly go to draft stage to process" type="object" class="oe_highlight" />
					<button name="split_qty_order" string="Split Order" states="split_order"
						help="You can process partially quantity of order" type="object" />
					<button name="open_procurements" string="Open Procurements"
						states="confirmed" help="Procurments to check for waiting materials.."
						type="object" class="oe_highlight" />
				</xpath>

				<xpath expr="//field[@name='workcenter_lines']/form" position="inside">
					<notebook>
						<page string="Raw Materials To Process">
							<group string="Raw Materials To Process" colspan="4">
								<field name="moves_workorder" nolabel="1" colspan="4"
									mode="tree" options="{'always_reload': True,'reload_on_button': True}">
									<tree string="Raw Materials To Process" create="false"
										delete="false"
										colors="blue:state == 'draft';black:state == 'in_progress';red:state in ('cancelled','rejected');gray:state in ('finished');green:state in ('consumed')">
										<field name="move_id" invisible="1" />
										<field name="workorder_id" invisible="1" />
										<field name="name" invisible="1" />
										<field name="product_id" readonly="1" />
										<field name="prodlot_id" readonly="1" invisible="1" />
										<field name="total_qty" readonly="1" />
										<field name="process_qty" readonly="1" />
										<field name="accepted_qty" readonly="1" />
										<field name="rejected_qty" readonly="1" invisible="1" />
										<field name="start_date" readonly="1" />
										<button name="%(action_change_common_date_update)d"
											type="action" icon="gtk-execute" context="{'fields_name':'start_date'}"
											string="Update Start Date" />
										<field name="end_date" readonly="1" />
										<button name="%(action_change_common_date_update_end)d"
											type="action" icon="gtk-execute" context="{'fields_name':'end_date'}"
											string="Update End Date" />
										<!-- For OutSourcing Process -->
										<field name="order_type" invisible="1" />
										<field name="service_supplier_id" />
										<!--attrs="{'invisible':[('order_type','=','in')], 'required':[('order_type','=','out')]}" 
											/ -->
										<field name="po_order_id" readonly="1" invisible="1" />
										<!-- attrs="{'invisible':[('order_type','=','in')]}" / -->

										<field name="state" readonly="1" />
										<!-- field name="reason" readonly="1" / -->
										<button name="button_to_start" string="Start" states="draft"
											icon="gtk-media-play" help="Start Working" type="object" />
										<button name="button_to_reject" string="Reject Quantity"
											states="in_progress" icon="gtk-stop" help="Reject Quantity"
											type="object" />
										<button name="button_to_draft" string="Set Draft"
											states="cancel" icon="gtk-convert" help="Set to Draft" type="object" />
										<button name="button_to_finish" string="Finished"
											states="in_progress" icon="terp-check" help="Finish Product"
											type="object" />
										<!-- button name="button_to_consume" string="Consume Product" states="in_progress" 
											icon="gtk-go-forward" context="{'consume': True}" help="Consume Product" 
											type="object" / -->
									</tree>
									<form string="Products To Process" version="7.0">
										<header colspan="8">
											<field name="state" widget="statusbar"
												statusbar_visible="draft,in_progress,finished" type="object" />
										</header>
										<group>
											<group string="Raw Materials Movements">
												<field name="product_id" readonly="1" />
												<field name="name" invisible="1" />
												<field name="total_qty" readonly="1" />
												<field name="accepted_qty" readonly="1" />
												<field name="rejected_qty" readonly="1" />
											</group>
											<group string="Semi-Finished Products Movements">
												<field name="s_product_id" readonly="1" />
												<field name="s_total_qty" readonly="1" />
												<field name="s_accepted_qty" readonly="1" />
												<field name="s_rejected_qty" readonly="1" />
											</group>
										</group>
										<group string="General Information">
											<group>
												<field name="start_date" readonly="1" />
												<field name="order_type" invisible="1" />
												<field name="service_supplier_id"
													attrs="{'required':[('order_type','=','out')],'invisible':[('order_type','=','in')]}" />
												<field name="prodlot_id" readonly="1" />
											</group>
											<group>
												<field name="end_date" readonly="1" />
												<field name="po_order_id" readonly="1"
													attrs="{'invisible':[('order_type','=','in')]}" />
											</group>
										</group>
									</form>
								</field>
							</group>
						</page>
						<page string="Rejected Raw Materials">
							<group string="Rejected Raw Materials" colspan="4">
								<field name="moves_rejection" nolabel="1" colspan="4"
									mode="tree" options="{'always_reload': True,'reload_on_button': True}">
									<tree string="Rejected Raw Materials" create="false"
										delete="false" editable="bottom"
										colors="red:state in ('cancelled','rejected')">
										<field name="move_id" invisible="1" />
										<field name="rejected_workorder_id" invisible="1" />
										<field name="name" invisible="1" />
										<field name="product_id" readonly="1" />
										<field name="prodlot_id" readonly="1" />
										<field name="rejected_qty" readonly="1" />
										<field name="rejected_location_id" readonly="1" />
										<field name="rejected_date" readonly="1" />
										<field name="reallocate_date" readonly="1" />
										<field name="reason" readonly="1" />
										<field name="state" readonly="1" />
										<field name="is_reallocate" readonly="1" />
										<button name="button_to_reallocate" string="Re-Allocate"
											icon="terp-gtk-go-back-rtl" help="Process fresh quantity to re-allocate"
											attrs="{'invisible':[('is_reallocate', '=', True)]}" type="object" />
									</tree>
								</field>
							</group>
						</page>
					</notebook>
				</xpath>
				<xpath expr="//field[@name='workcenter_lines']/tree/field[@name='cycle']"
					position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>

				<xpath expr="//field[@name='workcenter_lines']/form//field[@name='name']"
					position="after">
					<field name="order_type" />
					<field name="user_id" />
				</xpath>
			</field>
		</record>

		<record id="view_mrp_production_filter" model="ir.ui.view">
			<field name="name">mrp.production.select</field>
			<field name="model">mrp.production</field>
			<field name="inherit_id" ref="mrp.view_mrp_production_filter" />
			<field name="arch" type="xml">
				<xpath expr='//filter[@string="Product"]' position='after'>
					<filter string="Customer" domain="[]"
						context="{'group_by':'customer_id'}" />
					<filter string="Sale Order" domain="[]"
						context="{'group_by':'sale_order_id'}" />
				</xpath>

				<xpath expr='//filter[@string="Date"]' position='after'>
					<filter string="Parent Order" domain="[]"
						context="{'group_by':'parent_id'}" help="Child Split orders" />
				</xpath>

			</field>
		</record>

		<record id="mrp_production_tree_view_add_fields" model="ir.ui.view">
			<field name="name">mrp.production.tree.produced.qty</field>
			<field name="model">mrp.production</field>
			<field name="inherit_id" ref="mrp.mrp_production_tree_view" />
			<field name="arch" type="xml">
				<field name="product_qty" position="after">
					<field name="already_produced_qty" />
					<field name="scraped_qty" />
					<field name="customer_id" invisible="1" />
					<field name="sale_order_id" invisible="1" />
				</field>
				<xpath expr="//field[@name='cycle_total']" position="attributes">
					<attribute name="invisible">1</attribute>
				</xpath>
				<xpath expr="//field[@name='hour_total']" position="attributes">
					<attribute name="widget">float_time</attribute>
				</xpath>
			</field>
		</record>


		<record model="ir.ui.view"
			id="mrp_production_workcenter_form_view_process_lines">
			<field name="name">mrp.production.workcenter.line.form.process.lines
			</field>
			<field name="model">mrp.production.workcenter.line</field>
			<field name="inherit_id"
				ref="mrp_operations.mrp_production_workcenter_form_view_inherit" />
			<field name="arch" type="xml">
				<page string="Information" position="before">
					<page string="Process Materials">
						<group string="Raw Materials To Process" colspan="4">
							<field name="moves_workorder" nolabel="1" colspan="4" mode="tree"
								options="{'always_reload': True,'reload_on_button': True}">
								<tree string="Raw Materials To Process" create="false"
									delete="false"
									colors="blue:state == 'draft';black:state == 'in_progress';red:state in ('cancelled','rejected');gray:state in ('finished');green:state in ('consumed')">
									<field name="move_id" invisible="1" />
									<field name="workorder_id" invisible="1" />
									<field name="name" invisible="1" />
									<field name="product_id" readonly="1" />
									<field name="prodlot_id" readonly="1" invisible="1" />
									<field name="total_qty" readonly="1" />
									<field name="process_qty" readonly="1" />
									<field name="accepted_qty" readonly="1" />
									<field name="rejected_qty" readonly="1" invisible="1" />
									<field name="start_date" readonly="1" />
									<button name="%(action_change_common_date_update)d"
										type="action" icon="gtk-execute" context="{'fields_name':'start_date'}"
										string="Update Start Date" />
									<field name="end_date" readonly="1" />
									<button name="%(action_change_common_date_update_end)d"
										type="action" icon="gtk-execute" context="{'fields_name':'end_date'}"
										string="Update End Date" />
									<!-- For OutSourcing Process -->
									<field name="order_type" invisible="1" />
									<field name="service_supplier_id" />
									<!--attrs="{'invisible':[('order_type','=','in')], 'required':[('order_type','=','out')]}" 
										/ -->
									<field name="po_order_id" readonly="1" invisible="1" />
									<!-- attrs="{'invisible':[('order_type','=','in')]}" / -->

									<field name="state" readonly="1" />
									<!-- field name="reason" readonly="1" / -->
									<button name="button_to_start" string="Start" states="draft"
										icon="gtk-media-play" help="Start Working" type="object" />
									<button name="button_to_reject" string="Reject Quantity"
										states="in_progress" icon="gtk-stop" help="Reject Quantity"
										type="object" />
									<button name="button_to_draft" string="Set Draft"
										states="cancel" icon="gtk-convert" help="Set to Draft" type="object" />
									<button name="button_to_finish" string="Finished"
										states="in_progress" icon="terp-check" help="Finish Product"
										type="object" />
									<!-- button name="button_to_consume" string="Consume Product" states="in_progress" 
										icon="gtk-go-forward" context="{'consume': True}" help="Consume Product" 
										type="object" / -->
								</tree>
								<form string="Products To Process" version="7.0">
									<header colspan="8">
										<field name="state" widget="statusbar"
											statusbar_visible="draft,in_progress,finished" type="object" />
									</header>
									<group>
										<group string="Raw Materials Movements">
											<field name="product_id" readonly="1" />
											<field name="name" invisible="1" />
											<field name="total_qty" readonly="1" />
											<field name="accepted_qty" readonly="1" />
											<field name="rejected_qty" readonly="1" />
										</group>
										<group string="Semi-Finished Products Movements">
											<field name="s_product_id" readonly="1" />
											<field name="s_total_qty" readonly="1" />
											<field name="s_accepted_qty" readonly="1" />
											<field name="s_rejected_qty" readonly="1" />
										</group>
									</group>
									<group string="General Information">
										<group>
											<field name="start_date" readonly="1" />
											<field name="order_type" invisible="1" />
											<field name="service_supplier_id"
												attrs="{'required':[('order_type','=','out')],'invisible':[('order_type','=','in')]}" />
											<field name="prodlot_id" readonly="1" />
										</group>
										<group>
											<field name="end_date" readonly="1" />
											<field name="po_order_id" readonly="1"
												attrs="{'invisible':[('order_type','=','in')]}" />
										</group>
									</group>
								</form>
							</field>
						</group>
						<group string="Rejected Raw Materials" colspan="4">
							<field name="moves_rejection" nolabel="1" colspan="4" mode="tree"
								options="{'always_reload': True,'reload_on_button': True}">
								<tree string="Rejected Raw Materials" create="false"
									delete="false" editable="bottom" colors="red:state in ('cancelled','rejected')">
									<field name="move_id" invisible="1" />
									<field name="rejected_workorder_id" invisible="1" />
									<field name="name" invisible="1" />
									<field name="product_id" readonly="1" />
									<field name="prodlot_id" readonly="1" />
									<field name="rejected_qty" readonly="1" />
									<field name="rejected_location_id" readonly="1" />
									<field name="rejected_date" readonly="1" />
									<field name="reallocate_date" readonly="1" />
									<field name="reason" readonly="1" />
									<field name="state" readonly="1" />
									<field name="is_reallocate" readonly="1" />
									<button name="button_to_reallocate" string="Re-Allocate"
										icon="terp-gtk-go-back-rtl" help="Process fresh quantity to re-allocate"
										attrs="{'invisible':[('is_reallocate', '=', True)]}" type="object" />
								</tree>
							</field>
						</group>
					</page>
				</page>
				<field name="sequence" position="after">
					<field name="user_id" readonly="1" />
					<field name="order_type" readonly="1" />
				</field>

				<button name="button_start_working" position="replace" />
				<button name="button_resume" position="replace" />
				<button name="button_done" position="replace" />
				<button name="button_pause" position="replace" />
				<button name="button_draft" position="replace" />
				<button name="button_cancel" position="replace" />

				<xpath expr='//group[@string="Actual Production Date"]'
					position='replace'>
					<group string="Actual Production Date">
						<label for="date_start" string="Start Date" />
						<div>
							<field name="date_start" readonly="1" string="Start Date" />
							<button name="%(action_change_common_date_update)d" type="action"
								string="Update Start Date?" class="oe_link" context="{'fields_name':'date_start'}" />
						</div>
						<label for="temp_date_finished" string="Stop Date" />
						<div>
							<field name="date_finished" readonly="1" />
							<button name="%(action_change_common_date_update)d" type="action"
								string="Update Stop Date?" class="oe_link"
								context="{'fields_name':'date_finished,temp_date_finished'}" />
						</div>
						<field name="delay" widget="float_time" />
					</group>
				</xpath>

			</field>
		</record>


		<record model="ir.ui.view"
			id="mrp_production_workcenter_form_view_process_lines_tree">
			<field name="name">mrppwl.process.lines.tree</field>
			<field name="model">mrp.production.workcenter.line</field>
			<field name="inherit_id"
				ref="mrp_operations.mrp_production_workcenter_tree_view_inherit" />
			<field name="arch" type="xml">
				<field name="hour" position="after">
					<field name="delay" widget="float_time" />
				</field>
			</field>
		</record>

		<record id="mrp_routing_workcenter_tree_view_in" model="ir.ui.view">
			<field name="name">mrp.routing.workcenter.tree.in</field>
			<field name="model">mrp.routing.workcenter</field>
			<field name="inherit_id" ref="mrp.mrp_routing_workcenter_tree_view" />
			<field name="arch" type="xml">
				<field name="workcenter_id" position="after">
					<field name="order_type" />
				</field>
				<field name="cycle_nbr" position="attributes">
					<attribute name="invisible">1</attribute>
				</field>
				<field name="hour_nbr" position="attributes">
					<attribute name="invisible">1</attribute>
				</field>
			</field>
		</record>

		<record id="mrp_routing_workcenter_form_view_in" model="ir.ui.view">
			<field name="name">mrp.routing.workcenter.form.in</field>
			<field name="model">mrp.routing.workcenter</field>
			<field name="inherit_id" ref="mrp.mrp_routing_workcenter_form_view" />
			<field name="arch" type="xml">
				<field name="workcenter_id" position="after">
					<field name="order_type" required="1" />
				</field>
			</field>
		</record>

		<record id="mrp_bom_form_view_readonly" model="ir.ui.view">
			<field name="name">mrp.bom.form.readonly</field>
			<field name="model">mrp.bom</field>
			<field name="inherit_id" ref="mrp.mrp_bom_form_view" />
			<field name="arch" type="xml">
				<field name="product_qty" position="attributes">
					<attribute name="readonly">1</attribute>
				</field>
			</field>
		</record>

	</data>
</openerp>
